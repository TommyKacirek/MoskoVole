<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MOS zápočet - Kompletní Test (57 Otázek)</title>
    <style>
        :root {
            --primary: #2d3e50;
            --accent: #2e86de;
            --success: #10ac84;
            --error: #ee5253;
            --bg: #f4f7f6;
            --card-bg: #ffffff;
            --text: #333333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            display: flex;
            justify-content: center;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 800px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            padding: 30px;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        h1 { color: var(--primary); text-align: center; margin-bottom: 10px; font-size: 1.8rem; }
        .tag { background: #e0e0e0; padding: 2px 8px; border-radius: 4px; font-size: 0.8rem; vertical-align: middle; margin-left: 10px; color: #555; }
        
        .progress-container { width: 100%; background-color: #e0e0e0; height: 10px; border-radius: 5px; margin-bottom: 20px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--primary); width: 0%; transition: width 0.3s ease; }
        .stats { display: flex; justify-content: space-between; margin-bottom: 20px; font-size: 0.9rem; color: #666; font-weight: bold; }

        .question-text { font-size: 1.25rem; font-weight: 600; margin-bottom: 20px; line-height: 1.4; }
        .options-grid { display: flex; flex-direction: column; gap: 10px; }

        .option-label {
            display: flex;
            align-items: center;
            background-color: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }
        .option-label:hover { background-color: #e2e6ea; border-color: #ced4da; }
        .option-label input { margin-right: 15px; transform: scale(1.2); }
        
        .option-label.correct { background-color: #d1f2e5; border-color: var(--success); color: #0b7559; }
        .option-label.wrong { background-color: #fadbd8; border-color: var(--error); color: #922b21; }
        .option-label.missed { border-color: var(--success); border-style: dashed; }
        .option-label.disabled { pointer-events: none; opacity: 0.9; }

        .feedback { margin-top: 20px; padding: 15px; border-radius: 8px; background-color: #e8f4fd; border-left: 5px solid var(--primary); display: none; }
        .feedback.show { display: block; animation: fadeIn 0.4s; }

        .controls { margin-top: 25px; display: flex; justify-content: flex-end; gap: 10px; height: 50px; }
        button { border: none; padding: 12px 25px; font-size: 1rem; border-radius: 6px; cursor: pointer; transition: 0.2s; color: white; }
        .check-btn { background-color: var(--accent); display: none; }
        .check-btn:hover { background-color: #1e63a3; }
        .next-btn { background-color: var(--primary); display: none; }
        .next-btn:hover { background-color: #3b526b; }
        .restart-btn { background-color: var(--success); margin-top: 20px; }

        .results-screen { text-align: center; display: none; }
        .score-circle { width: 150px; height: 150px; border-radius: 50%; background: conic-gradient(var(--success) 0%, #e0e0e0 0%); margin: 20px auto; display: flex; align-items: center; justify-content: center; flex-direction: column; font-size: 2rem; font-weight: bold; color: var(--primary); }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<div class="container">
    <h1>MTCNA Full Test <span id="mode-tag" class="tag">57 Otázek</span></h1>
    
    <div id="quiz-ui">
        <div class="stats">
            <span id="q-counter">Start</span>
            <span id="score-counter">Skóre: 0</span>
        </div>
        <div class="progress-container">
            <div class="progress-bar" id="progress-bar"></div>
        </div>

        <div class="question-box">
            <div class="question-text" id="question-text">Načítání...</div>
            <div class="options-grid" id="options-container"></div>
        </div>

        <div class="feedback" id="feedback-box">
            <p id="feedback-text"></p>
        </div>

        <div class="controls">
            <button class="check-btn" id="check-btn" onclick="submitAnswer()">Zkontrolovat odpověď</button>
            <button class="next-btn" id="next-btn" onclick="nextQuestion()">Další otázka</button>
        </div>
    </div>

    <div id="results-ui" class="results-screen">
        <h2>Test dokončen!</h2>
        <div class="score-circle" id="final-score-circle">
            <div id="final-score">0%</div>
        </div>
        <p id="final-message"></p>
        <button class="restart-btn" onclick="initQuiz()">Spustit znovu</button>
    </div>
</div>

<script>
    /* KOMPLETNÍ SADA 57 OTÁZEK
       - Otázky označené 'type: multi' vyžadují zaškrtnutí všech správných možností (dle PDF).
       - Ostatní jsou 'type: single'.
    */
    const quizData = [
        {
            // PDF Otázka 71 - Multi
            question: "Máte RouterBOARD v továrním nastavení. Jaké jsou možné způsoby připojení pro konfiguraci? (Vyberte všechny správné možnosti)",
            type: "multi",
            options: [
                { text: "Serial Connection (Sériový port)", correct: true },
                { text: "MAC-Winbox", correct: true },
                { text: "Attach-monitor/keyboard", correct: false },
                { text: "Telnet (MAC-Telnet)", correct: true }
            ],
            rationale: "Podle PDF (otázka 71) jsou správné možnosti: Serial, MAC-Winbox a Telnet (RouterOS podporuje MAC-Telnet i bez IP)."
        },
        {
            question: "K čemu slouží Safe Mode ve WinBoxu / konzoli?",
            type: "single",
            options: [
                { text: "Automaticky vrátí změny při ztrátě spojení", correct: true },
                { text: "Zabrání smazání systémových souborů", correct: false },
                { text: "Uvede router do režimu nízké spotřeby", correct: false }
            ],
            rationale: "Funkce chrání před chybou v konfiguraci. Pokud se odpojíte, router vrátí změny zpět (Ctrl+x v konzoli)."
        },
        {
            question: "Typická chyba při statické konfiguraci IP adresy na rozhraní?",
            type: "single",
            options: [
                { text: "Použití veřejné IP adresy", correct: false },
                { text: "Špatná maska sítě (např. chybějící /24)", correct: true },
                { text: "Nezadání DNS serveru", correct: false }
            ],
            rationale: "Pokud nezadáte masku, RouterOS často doplní /32, což způsobí, že se router s nikým ve stejné síti nevidí."
        },
        {
            // PDF Otázka 49/114 - Multi
            question: "Co vše může získat MikroTik DHCP klient z DHCP serveru? (Vyberte všechny správné možnosti)",
            type: "multi",
            options: [
                { text: "IP Address and Subnet", correct: true },
                { text: "IP Gateway", correct: true },
                { text: "DNS Server", correct: true },
                { text: "Byte limit", correct: false }
            ],
            rationale: "Podle PDF (otázka 49 a 114) klient přebírá IP, Masku, Bránu (Gateway) a DNS."
        },
        {
            // PDF Otázka 102
            question: "Kde má být nakonfigurován DHCP server, pokud jsou rozhraní ether1–3 zařazena do bridge „bridge-lan“?",
            type: "single",
            options: [
                { text: "Na rozhraní Bridge", correct: true },
                { text: "Na ether1", correct: false },
                { text: "Na všech portech ether1-3", correct: false }
            ],
            [cite_start]rationale: "Pokud jsou porty v bridgi, DHCP musí být konfigurováno na logickém rozhraní 'Bridge'[cite: 1854]."
        },
        {
            // PDF Otázka 121
            question: "Jaké nastavení je typické pro pravidlo NAT (masquerade) pro odchod provozu z LAN do Internetu?",
            type: "single",
            options: [
                { text: "Chain: srcnat, Out-Interface: WAN, Action: masquerade", correct: true },
                { text: "Chain: dstnat, In-Interface: LAN, Action: masquerade", correct: false },
                { text: "Chain: input, Action: accept", correct: false }
            ],
            [cite_start]rationale: "Maškaráda (Source NAT) se používá při odchodu ven z routeru (Out-Interface)[cite: 2164]."
        },
        {
            question: "Jakým způsobem je vhodné omezit přístup ke službám (WinBox, SSH) v IP → Services?",
            type: "single",
            options: [
                { text: "Vypnutím firewallu", correct: false },
                { text: "Vyplněním pole 'Available From'", correct: true },
                { text: "Změnou portu na 80", correct: false }
            ],
            rationale: "Available From omezuje přístup jen na konkrétní IP adresy nebo rozsahy."
        },
        {
            question: "Jak omezit, na jakých rozhraních bude dostupný MAC-WinBox nebo MAC-Telnet server?",
            type: "single",
            options: [
                { text: "V Tools -> MAC Server nastavit Allowed Interface List", correct: true },
                { text: "V IP -> Firewall -> Filter", correct: false },
                { text: "V nastavení Bridge", correct: false }
            ],
            [cite_start]rationale: "V menu Tools -> MAC Server lze zakázat discovery a mac-telnet na veřejných portech[cite: 1604]."
        },
        {
            // PDF Otázka 75 - Multi
            question: "Vyberte pravdivá tvrzení o zálohách v RouterOS (Backup vs Export):",
            type: "multi",
            options: [
                { text: "Backup soubory (binární) nejsou editovatelné", correct: true },
                { text: "Export (skript) je čitelný textový soubor", correct: true },
                { text: "Backup obsahuje pouze hesla", correct: false }
            ],
            [cite_start]rationale: "PDF potvrzuje: 'Backup files are not editable' a 'Export saves full configuration in script format'[cite: 1503]."
        },
        {
            question: "Která skupina práv (Group) má plnou kontrolu nad routerem?",
            type: "single",
            options: [
                { text: "write", correct: false },
                { text: "full", correct: true },
                { text: "admin", correct: false }
            ],
            rationale: "Skupina 'full' umožňuje čtení, zápis, testování, reboot i správu uživatelů."
        },
        {
            question: "Na které vrstvě ISO/OSI pracuje síťový bridge?",
            type: "single",
            options: [
                { text: "L3 (Síťová)", correct: false },
                { text: "L2 (Linková)", correct: true },
                { text: "L1 (Fyzická)", correct: false }
            ],
            [cite_start]rationale: "Bridge spojuje segmenty sítě na základě MAC adres (Data Link Layer)[cite: 2125]."
        },
        {
            question: "Jaký je výchozí STP režim v RouterOS při vytvoření bridge?",
            type: "single",
            options: [
                { text: "None", correct: false },
                { text: "STP", correct: false },
                { text: "RSTP", correct: true }
            ],
            rationale: "RSTP (Rapid Spanning Tree Protocol) je výchozí a rychlejší než staré STP."
        },
        {
            question: "Jaký STP režim je doporučený pro bridge s VLAN filteringem?",
            type: "single",
            options: [
                { text: "MSTP", correct: true },
                { text: "RSTP", correct: false },
                { text: "Žádný", correct: false }
            ],
            rationale: "MSTP (Multiple Spanning Tree) je optimalizováno pro VLAN prostředí."
        },
        {
            // PDF Otázka 154
            question: "Které rozhraní NELZE standardně přidat do bridge?",
            type: "single",
            options: [
                { text: "Ethernet port", correct: false },
                { text: "Wireless v módu 'station'", correct: true },
                { text: "EOIP tunel", correct: false }
            ],
            [cite_start]rationale: "Mód 'station' nepodporuje L2 bridging kvůli limitacím 802.11 (3-mac frame)[cite: 2621]."
        },
        {
            question: "Co znamená volba Hardware Offload u portu v bridge?",
            type: "single",
            options: [
                { text: "Přepínání provádí switch čip, nezatěžuje CPU", correct: true },
                { text: "Přenese výpočty do cloudu", correct: false },
                { text: "Vypne port při přehřátí", correct: false }
            ],
            rationale: "HW Offload umožňuje přímý tok dat přes switch chip (wire speed)."
        },
        {
            question: "Co určuje hodnota PVID na portu v bridge?",
            type: "single",
            options: [
                { text: "VLAN ID, které se zahazuje", correct: false },
                { text: "VLAN ID přidané příchozím netagovaným paketům", correct: true },
                { text: "Prioritu paketu", correct: false }
            ],
            rationale: "PVID (Port VLAN ID) se používá pro otagování příchozího 'čistého' provozu uvnitř switche/bridge."
        },
        {
            question: "Co znamená, že je port v seznamu Untagged v nastavení VLAN na bridge?",
            type: "single",
            options: [
                { text: "Router před odesláním paketu odstraní VLAN značku", correct: true },
                { text: "Router zahodí netagované pakety", correct: false },
                { text: "Port je vypnutý", correct: false }
            ],
            rationale: "Untagged porty (access) posílají data k zařízením bez VLAN tagu."
        },
        {
            question: "Co indikuje přítomnost menu 'Switch' ve WinBoxu?",
            type: "single",
            options: [
                { text: "Zařízení má dedikovaný switch čip s vlastní konfigurací", correct: true },
                { text: "Je aktivní softwarový bridge", correct: false },
                { text: "Zařízení je poškozené", correct: false }
            ],
            rationale: "Menu Switch slouží ke konfiguraci hardwarového switch chipu."
        },
        {
            question: "Jak se chová port na switch čipu, pokud má VLAN-mode nastaveno na secure?",
            type: "single",
            options: [
                { text: "Propouští vše", correct: false },
                { text: "Kontroluje VLAN tabulku a zahazuje neznámé VLANy", correct: true },
                { text: "Šifruje provoz", correct: false }
            ],
            rationale: "Secure mód zahazuje pakety s VLAN ID, které nejsou definovány ve VLAN tabulce."
        },
        {
            question: "Co dělá nastavení VLAN-header=always-strip u portu switch čipu?",
            type: "single",
            options: [
                { text: "Vždy odstraní VLAN tag při odchodu z portu", correct: true },
                { text: "Vždy přidá VLAN tag", correct: false },
                { text: "Zahodí paket", correct: false }
            ],
            rationale: "Odpovídá funkci Access portu - tag se odstraní před odesláním do kabelu."
        },
        {
            // PDF Otázka 25
            question: "Co znamená příznak 'C' v routovací tabulce (IP -> Routes)?",
            type: "single",
            options: [
                { text: "Connected (přímo připojená síť)", correct: true },
                { text: "Complex route", correct: false },
                { text: "Cable unplugged", correct: false }
            ],
            rationale: "C = Connected. [cite_start]Vzniká automaticky přidáním IP adresy na interface[cite: 813]."
        },
        {
            // PDF Otázka 16
            question: "Jaká cílová adresa se používá pro Default Route?",
            type: "single",
            options: [
                { text: "255.255.255.255", correct: false },
                { text: "0.0.0.0/0", correct: true },
                { text: "192.168.1.1", correct: false }
            ],
            rationale: "0.0.0.0/0 zahrnuje všechny sítě. [cite_start]Používá se pro bránu do internetu[cite: 685]."
        },
        {
            question: "Jak router vybírá směrovací záznam, pokud existuje více záznamů odpovídajících adrese?",
            type: "single",
            options: [
                { text: "Longest Prefix Match (nejkonkrétnější maska)", correct: true },
                { text: "Podle abecedy", correct: false },
                { text: "Náhodně", correct: false }
            ],
            rationale: "Specifičtější cesta (např. /32) má vždy přednost před obecnější (/24 nebo /0)."
        },
        {
            question: "Co v instanci RIP v RouterOS 7 znamená volba Redistribute=connected?",
            type: "single",
            options: [
                { text: "Zvyšuje rychlost sítě", correct: false },
                { text: "Oznamuje sousedům sítě přímo připojené k routeru", correct: true },
                { text: "Maže připojené trasy", correct: false }
            ],
            rationale: "Umožňuje propagovat lokální sítě (LAN) do dynamického routovacího protokolu."
        },
        {
            question: "Jaký je hlavní účel volby Country v nastavení WiFi?",
            type: "single",
            options: [
                { text: "Nastavuje povolené kanály a vysílací výkon dle legislativy", correct: true },
                { text: "Mění jazyk rozhraní", correct: false },
                { text: "Mění časové pásmo", correct: false }
            ],
            rationale: "Nutné pro dodržení regulačních limitů (v ČR ČTÚ)."
        },
        {
            question: "Jaké kanály 2,4 GHz jsou povoleny v České republice?",
            type: "single",
            options: [
                { text: "1 až 11", correct: false },
                { text: "1 až 13", correct: true },
                { text: "Pouze 1, 6 a 11", correct: false }
            ],
            rationale: "V Evropě (ETSI) je povoleno 13 kanálů."
        },
        {
            // PDF Otázka 106
            question: "Který mód stanice je proprietární a umožňuje transparentní L2 bridge mezi MikroTiky?",
            type: "single",
            options: [
                { text: "station", correct: false },
                { text: "station-bridge", correct: true },
                { text: "ap-bridge", correct: false }
            ],
            rationale: "Station-bridge je proprietární režim MikroTiku. [cite_start]Station-pseudobridge je univerzální náhrada (s omezeními)[cite: 1914]."
        },
        {
            question: "Jaká kombinace módů je doporučena pro transparentní most mezi Ethernetem a WiFi?",
            type: "single",
            options: [
                { text: "AP: ap-bridge <-> Klient: station-bridge", correct: true },
                { text: "AP: bridge <-> Klient: station", correct: false },
                { text: "Oba ap-bridge", correct: false }
            ],
            rationale: "Standardní řešení pro MikroTik PtP spoj."
        },
        {
            question: "Jaký nástroj použít pro zjištění obsazenosti kanálů v okolí?",
            type: "single",
            options: [
                { text: "Ping", correct: false },
                { text: "Snooper / Spectral Scan / Frequency Usage", correct: true },
                { text: "Torch", correct: false }
            ],
            rationale: "PDF zmiňuje kontrolu frekvencí. Snooper je pokročilý nástroj pro analýzu spektra."
        },
        {
            // PDF Otázka 280
            question: "Jaký je účel parametru 'default-forwarding=no' v nastavení WiFi?",
            type: "single",
            options: [
                { text: "Zabrání komunikaci mezi klienty navzájem (Client Isolation)", correct: true },
                { text: "Odpojí klienta od internetu", correct: false },
                { text: "Zabrání klientům připojit se k AP", correct: false }
            ],
            [cite_start]rationale: "Default forwarding=no izoluje klienty na L2 vrstvě[cite: 291]."
        },
        {
            question: "Co dělá parametr vlan-id v záznamu WiFi Access Listu?",
            type: "single",
            options: [
                { text: "Přiřadí klientovi konkrétní VLAN po připojení", correct: true },
                { text: "Filtruje podle VLAN", correct: false },
                { text: "Zakáže VLAN", correct: false }
            ],
            rationale: "Umožňuje dynamické VLANy (např. Hosté vs Zaměstnanci) na stejném SSID."
        },
        {
            // PDF Otázka 23 / 120 - Opakování konceptu
            question: "Které tvrzení o Firewallu a NATu je správné?",
            type: "single",
            options: [
                { text: "Connection tracking musí být zapnutý, aby fungoval NAT", correct: true },
                { text: "NAT funguje i bez Connection Trackingu", correct: false },
                { text: "Firewall filtry se zpracovávají náhodně", correct: false }
            ],
            [cite_start]rationale: "Bez sledování spojení router neví, kam vracet odpovědi pro NATované klienty[cite: 241]."
        },
        {
            // PDF Otázka 95
            question: "Který chain filtruje pakety směřující PŘÍMO NA router (např. WinBox, DNS)?",
            type: "single",
            options: [
                { text: "input", correct: true },
                { text: "forward", correct: false },
                { text: "output", correct: false }
            ],
            [cite_start]rationale: "Chain Input chrání samotný router[cite: 1778]."
        },
        {
            // PDF Otázka 89
            question: "Který chain filtruje pakety, které routerem POUZE PROCHÁZEJÍ (např. LAN -> Internet)?",
            type: "single",
            options: [
                { text: "forward", correct: true },
                { text: "input", correct: false },
                { text: "prerouting", correct: false }
            ],
            [cite_start]rationale: "Provoz uživatelů skrz router patří do chainu Forward[cite: 1709]."
        },
        {
            question: "Co se stane s paketem, pokud neodpovídá žádnému pravidlu ve firewallu?",
            type: "single",
            options: [
                { text: "Je zahozen (Drop)", correct: false },
                { text: "Je přijat (Accept)", correct: true },
                { text: "Vrátí se odesílateli", correct: false }
            ],
            rationale: "Výchozí politika RouterOS je 'co není zakázáno, je povoleno'."
        },
        {
            // PDF Otázka 23
            question: "Důsledek vypnutí Connection Tracking?",
            type: "single",
            options: [
                { text: "Nefunguje NAT a stavový firewall", correct: true },
                { text: "Zrychlí se WiFi", correct: false },
                { text: "Zvýší se bezpečnost", correct: false }
            ],
            rationale: "Router se stane 'bezstavovým', nebude umět NATovat."
        },
        {
            // PDF Otázka 76 / 119
            question: "Jaký stav (connection-state) mají pakety patřící do již navázaného a fungujícího spojení?",
            type: "single",
            options: [
                { text: "New", correct: false },
                { text: "Established", correct: true },
                { text: "Invalid", correct: false }
            ],
            [cite_start]rationale: "Established = již ověřené probíhající spojení[cite: 1522]."
        },
        {
            question: "Typické první pravidlo firewallu v chainu input/forward?",
            type: "single",
            options: [
                { text: "Drop all", correct: false },
                { text: "Accept established, related (untracked)", correct: true },
                { text: "Accept all", correct: false }
            ],
            rationale: "Zvyšuje výkon routeru, protože nemusí kontrolovat každý paket běžícího streamu."
        },
        {
            // PDF Otázka 147
            question: "Co dělá akce 'tarpit'?",
            type: "single",
            options: [
                { text: "Udržuje TCP spojení otevřené pro zpomalení útočníka", correct: true },
                { text: "Zahodí paket", correct: false },
                { text: "Zapíše do logu", correct: false }
            ],
            [cite_start]rationale: "Tarpit předstírá otevřené spojení, ale neposílá data, čímž vyčerpává zdroje útočníka[cite: 2552]."
        },
        {
            question: "Jak se chová provoz s akcí fasttrack?",
            type: "single",
            options: [
                { text: "Obchází většinu zpracování v CPU (firewall, queues)", correct: true },
                { text: "Je zahozen", correct: false },
                { text: "Má nejvyšší prioritu v QoS", correct: false }
            ],
            rationale: "FastTrack výrazně zvyšuje propustnost a snižuje zátěž CPU."
        },
        {
            question: "Jaký je hlavní účel protokolu PPP?",
            type: "single",
            options: [
                { text: "Vytváření tunelů bod-bod (VPN, PPPoE)", correct: true },
                { text: "Směrování", correct: false },
                { text: "Switching", correct: false }
            ],
            rationale: "Point-to-Point Protocol."
        },
        {
            question: "Jak RouterOS skládá konfiguraci PPP uživatele (bez RADIUS)?",
            type: "single",
            options: [
                { text: "Nastavení v PPP Secret + PPP Profile", correct: true },
                { text: "Pouze z IP Addresses", correct: false },
                { text: "Z DHCP serveru", correct: false }
            ],
            rationale: "Secret obsahuje přihlášení, Profile společná nastavení."
        },
        {
            question: "Co platí o polích Local Address a Remote Address v PPP profilu?",
            type: "single",
            options: [
                { text: "Local je IP routeru (brána), Remote je IP klienta", correct: true },
                { text: "Local je LAN, Remote je WAN", correct: false },
                { text: "Jsou to DNS servery", correct: false }
            ],
            rationale: "Definují konce tunelu."
        },
        {
            question: "Co je nutné udělat, pokud v PPP profilu používáte Bridge pro LAN přístup (místo routování)?",
            type: "single",
            options: [
                { text: "Zapnout Proxy-ARP na LAN bridge rozhraní", correct: true },
                { text: "Vypnout firewall", correct: false },
                { text: "Nastavit statickou IP", correct: false }
            ],
            [cite_start]rationale: "Proxy-ARP umožňuje routeru odpovídat na ARP dotazy jménem vzdáleného VPN klienta[cite: 1272]."
        },
        {
            question: "Proč už není protokol PPTP považován za bezpečný?",
            type: "single",
            options: [
                { text: "Slabé šifrování a autentizace (MS-CHAPv2)", correct: true },
                { text: "Je pomalý", correct: false },
                { text: "Nepodporuje IPv6", correct: false }
            ],
            rationale: "PPTP lze snadno prolomit hrubou silou."
        },
        {
            question: "Jak se chová PPPoE klient, pokud nezadáte Service Name?",
            type: "single",
            options: [
                { text: "Nepřipojí se", correct: false },
                { text: "Připojí se k jakémukoliv koncentrátoru", correct: true },
                { text: "Vybere nejrychlejší server", correct: false }
            ],
            rationale: "Akceptuje první PADO nabídku od jakéhokoliv serveru."
        },
        {
            question: "Proč je v rámci QoS běžné záměrně zahazovat pakety?",
            type: "single",
            options: [
                { text: "Aby donutil TCP protokol zpomalit (Congestion Avoidance)", correct: true },
                { text: "Protože CPU nestíhá", correct: false },
                { text: "Kvůli úspoře energie", correct: false }
            ],
            rationale: "TCP interpretuje ztrátu paketu jako signál k zpomalení."
        },
        {
            question: "Jak Simple Queues zpracovávají pakety ve vztahu k pořadí?",
            type: "single",
            options: [
                { text: "Sekvenčně shora dolů (0, 1, 2...)", correct: true },
                { text: "Všechny najednou", correct: false },
                { text: "Náhodně", correct: false }
            ],
            rationale: "První pravidlo, které pasuje, se uplatní. Ostatní se ignorují."
        },
        {
            question: "Jaký je rozdíl mezi Simple Queue a Queue Tree?",
            type: "single",
            options: [
                { text: "Simple je pro jednoduché omezení IP; Tree je pro komplexní hierarchii", correct: true },
                { text: "Tree je zastaralé", correct: false },
                { text: "Simple nefunguje s FastTrackem", correct: false }
            ],
            rationale: "Queue Tree umožňuje globální priority, ale je složitější."
        },
        {
            // PDF Otázka 117
            question: "Jaký je výchozí typ testu v nástroji Netwatch?",
            type: "single",
            options: [
                { text: "TCP", correct: false },
                { text: "ICMP (Ping)", correct: true },
                { text: "HTTP", correct: false }
            ],
            [cite_start]rationale: "Netwatch pravidelně 'pingá' hosta a spouští skripty při změně stavu[cite: 2094]."
        },
        {
            question: "Na které vrstvě pracuje WireGuard a jaký protokol používá?",
            type: "single",
            options: [
                { text: "L3, UDP", correct: true },
                { text: "L2, TCP", correct: false },
                { text: "L7, HTTPS", correct: false }
            ],
            rationale: "WireGuard je moderní L3 VPN nad UDP."
        },
        {
            question: "Jaký přístup k pojmům server a klient má WireGuard?",
            type: "single",
            options: [
                { text: "Server je ten s veřejnou IP", correct: false },
                { text: "Nerozlišuje, všichni jsou 'Peers' (rovnocenní)", correct: true },
                { text: "Klient pouze přijímá data", correct: false }
            ],
            rationale: "WireGuard je Peer-to-Peer."
        },
        {
            question: "Co znamená příznak 'R' u WireGuard rozhraní?",
            type: "single",
            options: [
                { text: "Running (aktivní handshake)", correct: true },
                { text: "Ready", correct: false },
                { text: "Rejected", correct: false }
            ],
            rationale: "Znamená to, že interface má funkční spojení s peerem."
        },
        {
            question: "K čemu slouží parametr allowed-address u WireGuard peeru?",
            type: "single",
            options: [
                { text: "Definuje směrování a filtraci (Crypto-Routing)", correct: true },
                { text: "Seznam povolených webů", correct: false },
                { text: "Veřejná IP peeru", correct: false }
            ],
            rationale: "Filtruje, jaké IP smí tunelem projít."
        },
        {
            question: "Co určují parametry endpoint-address a port u WireGuard?",
            type: "single",
            options: [
                { text: "Veřejnou adresu a port protistrany", correct: true },
                { text: "Vnitřní IP tunelu", correct: false },
                { text: "MAC adresu", correct: false }
            ],
            rationale: "Kam se mají fyzicky posílat šifrovaná data."
        },
        {
            question: "Co dělá parametr persistent-keepalive u WireGuard?",
            type: "single",
            options: [
                { text: "Restartuje tunel při chybě", correct: false },
                { text: "Posílá prázdné pakety pro udržení NAT mappingu", correct: true },
                { text: "Zvyšuje MTU", correct: false }
            ],
            rationale: "Udržuje průchod přes NAT otevřený."
        },
        {
            question: "K čemu slouží parametr preshared-key u WireGuard peeru?",
            type: "single",
            options: [
                { text: "Pro přihlášení do WinBoxu", correct: false },
                { text: "Ochrana proti post-quantum útokům", correct: true },
                { text: "Jako náhrada private key", correct: false }
            ],
            rationale: "Přidává vrstvu symetrického šifrování."
        },
        {
             // PDF Otázka 68 - Multi (Opakujeme logiku Netinstall pro jistotu pokrytí)
            question: "Které z následujících možností JSOU funkce Netinstallu? (Vyberte všechny správné možnosti)",
            type: "multi",
            options: [
                { text: "Reset hesla se zachováním konfigurace", correct: true },
                { text: "Instalace RouterOS", correct: true },
                { text: "Konfigurace IP adresy", correct: false },
                { text: "Obnova smazaných souborů", correct: false }
            ],
            [cite_start]rationale: "Reset hesla (Keep old configuration) je specifická funkce Netinstallu[cite: 1422]."
        }
    ];

    // --- APP LOGIC ---

    let currentQuestionIndex = 0;
    let score = 0;
    let currentData = null;
    let userSelection = []; // Pro multi-select

    // DOM Elements
    const qText = document.getElementById('question-text');
    const optsCont = document.getElementById('options-container');
    const feedbackBox = document.getElementById('feedback-box');
    const feedbackText = document.getElementById('feedback-text');
    const nextBtn = document.getElementById('next-btn');
    const checkBtn = document.getElementById('check-btn');
    const progressBar = document.getElementById('progress-bar');
    const qCounter = document.getElementById('q-counter');
    const scoreCounter = document.getElementById('score-counter');
    const quizUI = document.getElementById('quiz-ui');
    const resultsUI = document.getElementById('results-ui');
    const finalScoreEl = document.getElementById('final-score');
    const finalScoreCircle = document.getElementById('final-score-circle');
    const finalMsg = document.getElementById('final-message');

    function initQuiz() {
        currentQuestionIndex = 0;
        score = 0;
        quizUI.style.display = 'block';
        resultsUI.style.display = 'none';
        updateStats();
        loadQuestion();
    }

    function loadQuestion() {
        // Reset UI
        feedbackBox.classList.remove('show');
        feedbackBox.style.display = 'none';
        nextBtn.style.display = 'none';
        checkBtn.style.display = 'none';
        optsCont.innerHTML = '';
        userSelection = [];

        if (currentQuestionIndex >= quizData.length) {
            showResults();
            return;
        }

        currentData = quizData[currentQuestionIndex];
        
        // Update Text
        qText.innerHTML = currentData.question + 
            (currentData.type === 'multi' ? "<br><small style='color:#666; font-weight:normal;'>(Vyberte všechny správné odpovědi)</small>" : "");

        // Render Options
        currentData.options.forEach((opt, index) => {
            const label = document.createElement('label');
            label.classList.add('option-label');
            
            const input = document.createElement('input');
            input.type = currentData.type === 'multi' ? 'checkbox' : 'radio';
            input.name = 'quiz-option';
            input.value = index;
            
            // Event Listener
            input.onchange = () => handleSelection(index, input, label);

            label.appendChild(input);
            label.appendChild(document.createTextNode(opt.text));
            optsCont.appendChild(label);
        });

        updateStats();
    }

    function handleSelection(index, input, label) {
        if (currentData.type === 'single') {
            // Single choice: immediate check
            submitAnswer(index, label);
        } else {
            // Multi choice: toggle selection, show check button
            if (input.checked) {
                userSelection.push(index);
            } else {
                userSelection = userSelection.filter(i => i !== index);
            }
            // Show "Check" button if at least one selected
            checkBtn.style.display = userSelection.length > 0 ? 'inline-block' : 'none';
        }
    }

    function submitAnswer(singleIndex = null, singleLabel = null) {
        let correctIndexes = [];
        currentData.options.forEach((opt, idx) => {
            if (opt.correct) correctIndexes.push(idx);
        });

        const labels = optsCont.querySelectorAll('.option-label');
        const inputs = optsCont.querySelectorAll('input');
        
        // Disable inputs
        labels.forEach(l => l.classList.add('disabled'));
        inputs.forEach(i => i.disabled = true);
        checkBtn.style.display = 'none';

        let isCorrect = false;

        if (currentData.type === 'single') {
            // Logic for Single
            const selectedOpt = currentData.options[singleIndex];
            isCorrect = selectedOpt.correct;

            if (isCorrect) {
                singleLabel.classList.add('correct');
                score++;
                feedbackText.innerHTML = "<strong>Správně!</strong> " + (currentData.rationale || "");
            } else {
                singleLabel.classList.add('wrong');
                // Highlight correct
                labels[correctIndexes[0]].classList.add('correct');
                feedbackText.innerHTML = "<strong>Chyba.</strong> Správná odpověď: " + currentData.options[correctIndexes[0]].text + ".<br>" + (currentData.rationale || "");
            }

        } else {
            // Logic for Multi
            // Check if user selection matches correct indexes exactly
            userSelection.sort();
            correctIndexes.sort();
            
            const isMatch = JSON.stringify(userSelection) === JSON.stringify(correctIndexes);
            
            if (isMatch) {
                isCorrect = true;
                score++;
                feedbackText.innerHTML = "<strong>Výborně!</strong> Máte všechna správná pole.<br>" + (currentData.rationale || "");
            } else {
                isCorrect = false;
                feedbackText.innerHTML = "<strong>Neúplné nebo chybné.</strong><br>" + (currentData.rationale || "");
            }

            // Visual Feedback for Multi
            labels.forEach((lbl, idx) => {
                const isSelected = userSelection.includes(idx);
                const isActuallyCorrect = correctIndexes.includes(idx);

                if (isSelected && isActuallyCorrect) {
                    lbl.classList.add('correct'); // User selected correct
                } else if (isSelected && !isActuallyCorrect) {
                    lbl.classList.add('wrong'); // User selected wrong
                } else if (!isSelected && isActuallyCorrect) {
                    lbl.classList.add('missed'); // User missed this correct one
                }
            });
        }

        feedbackBox.style.display = 'block';
        setTimeout(() => feedbackBox.classList.add('show'), 10);
        nextBtn.style.display = 'inline-block';
        scoreCounter.textContent = `Skóre: ${score}`;
    }

    function nextQuestion() {
        currentQuestionIndex++;
        loadQuestion();
    }

    function updateStats() {
        qCounter.textContent = `Otázka ${currentQuestionIndex + 1} / ${quizData.length}`;
        const pct = ((currentQuestionIndex) / quizData.length) * 100;
        progressBar.style.width = `${pct}%`;
    }

    function showResults() {
        quizUI.style.display = 'none';
        resultsUI.style.display = 'block';
        const pct = Math.round((score / quizData.length) * 100);
        finalScoreEl.textContent = `${pct}%`;
        
        const color = pct >= 80 ? '#10ac84' : (pct >= 50 ? '#ff9f43' : '#ee5253');
        finalScoreCircle.style.background = `conic-gradient(${color} ${pct}%, #e0e0e0 ${pct}%)`;
        finalScoreCircle.style.color = color;

        if(pct === 100) finalMsg.textContent = "Perfektní! Jste připraveni.";
        else if(pct > 80) finalMsg.textContent = "Skvělá práce.";
        else finalMsg.textContent = "Doporučuji projít otázky znovu.";
    }

    initQuiz();

</script>
</body>
</html>

